<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>攒钱小助手</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="app">
      <header class="header">
        <h1>攒钱小助手</h1>
        <div class="subtitle">设置目标、按日存入、达成即庆祝 🎉</div>
      </header>

      <main class="main">
        <section class="panel goals">
          <h2>目标管理</h2>
          <div class="goals-wrap">
            <ul id="goalsList" class="list goals-list"></ul>
            <div class="goal-add">
              <input id="goalName" placeholder="目标名称，如 旅行基金" />
              <input id="goalTarget" type="number" min="0" step="1" placeholder="目标金额（元）" />
              <button id="addGoalBtn">新增目标</button>
            </div>
          </div>
        </section>
        <section class="panel config">
          <h2>目标设置</h2>
          <div class="grid">
            <label>
              <span>每日存入</span>
              <input type="number" id="dailyAmount" min="0" step="1" value="10" />
            </label>
            <label>
              <span>开始日期</span>
              <input type="date" id="startDate" />
            </label>
            <label>
              <span>截止日期</span>
              <input type="date" id="endDate" />
            </label>
            <label>
              <span>目标金额（可自定义）</span>
              <input type="number" id="targetAmount" min="0" step="1" />
            </label>
            <label>
              <span>趣味主题</span>
              <select id="theme">
                <option value="appliance">家电表情</option>
                <option value="fruits">水果表情</option>
                <option value="stars">星星宇宙</option>
              </select>
            </label>
          </div>
          <div class="hint" id="calcHint"></div>
          <div class="actions">
            <button id="saveConfig">保存设置</button>
            <button id="resetAll" class="danger">重置所有</button>
            <button id="exportBtn">导出数据</button>
            <button id="importBtn">导入数据</button>
            <input type="file" id="importFile" accept="application/json" style="display:none" />
          </div>
        </section>

        <section class="panel progress">
          <h2>进度</h2>
          <div class="stats">
            <div><span>已存</span><strong id="savedTotal">0</strong></div>
            <div><span>目标</span><strong id="targetTotal">0</strong></div>
            <div><span>完成</span><strong id="percent">0%</strong></div>
            <div><span>剩余</span><strong id="remain">0</strong></div>
          </div>
          <div class="bar">
            <div class="bar-fill" id="barFill" style="width:0%"></div>
          </div>
          <div class="emoji-track" id="emojiTrack">
            <div class="emoji-markers" id="emojiMarkers"></div>
            <div class="mascot" id="mascot" aria-hidden="true">📺</div>
          </div>
          <div class="motivate" id="motivate">加油，开始第一笔吧！</div>
          <div class="badges">
            <h3>成就</h3>
            <ul id="badgesList" class="list badges-list"></ul>
          </div>
        </section>

        <section class="panel deposit">
          <h2>记录存入</h2>
          <div class="deposit-row">
            <input type="number" id="depositAmount" min="0" step="1" />
            <button id="addDeposit">添加存入</button>
          </div>
          <ul class="list" id="logList"></ul>
        </section>

        <section class="panel cloud">
          <h2>云同步（Supabase）</h2>
          <div class="grid">
            <label>
              <span>Project URL</span>
              <input id="supaUrl" placeholder="https://xxxx.supabase.co" />
            </label>
            <label>
              <span>Anon Key</span>
              <input id="supaAnon" placeholder="公共 anon key" />
            </label>
            <label>
              <span>邮箱（魔法链接）</span>
              <input id="supaEmail" type="email" placeholder="you@example.com" />
            </label>
          </div>
          <div class="actions">
            <button id="cloudSave">保存连接</button>
            <button id="cloudLogin">发送登录链接</button>
            <button id="cloudLogout">登出</button>
            <button id="syncDown">云端覆盖本地</button>
            <button id="syncUp">本地覆盖云端</button>
          </div>
          <div class="hint" id="cloudStatus">未连接</div>
        </section>
      </main>

      <footer class="footer">数据仅保存在你的浏览器本地（localStorage）</footer>
    </div>

    <canvas id="confetti" class="confetti" aria-hidden="true"></canvas>

    <script src="app.js"></script>
  </body>
  </html>
